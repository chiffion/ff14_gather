<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FF14 æ¡é›†èˆ‡é‡£é­šå¤§å¸«ç­†è¨˜</title>
    <style>
        :root {
            --bot: #78a55a; --min: #d4a017; --fish: #3498db; --bg: #121212; 
            --card: #1e1e1e; --active: #ff4757; --text: #e0e0e0; --fashion: #e84393;
        }
        body { font-family: -apple-system, "Microsoft JhengHei", sans-serif; background: var(--bg); color: var(--text); margin: 0; padding-bottom: 50px; }
        
        .header {
            position: sticky; top: 0; background: #000; padding: 12px;
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 2px solid var(--active); z-index: 1000;
        }
        #lt-display { font-weight: bold; color: #74b9ff; font-size: 1.2rem; display: block; }
        #et-display { color: #f1c40f; font-size: 0.9rem; }
        
        .container { padding: 10px; max-width: 600px; margin: auto; }
        .group-title { font-size: 0.85rem; color: #888; margin: 15px 0 8px; display: flex; align-items: center; }
        .group-title::after { content: ""; flex: 1; height: 1px; background: #333; margin-left: 10px; }

        .card {
            background: var(--card); border-radius: 10px; padding: 12px; margin-bottom: 12px;
            border-left: 6px solid #444; position: relative;
        }
        .card.active { border-left-color: var(--active) !important; background: #2d1b1b; }
        .card.bot { border-left-color: var(--bot); }
        .card.min { border-left-color: var(--min); }
        .card.fsh { border-left-color: var(--fish); }

        .v-badge { position: absolute; right: 10px; top: 10px; font-size: 10px; background: #333; padding: 2px 6px; border-radius: 4px; }
        .fashion-tag { color: var(--fashion); font-weight: bold; font-size: 11px; margin-bottom: 5px; display: block; }
        
        .item-name { font-size: 1.1rem; font-weight: bold; color: #fff; margin-bottom: 5px; display: block; }
        .stats-row { 
            display: flex; gap: 10px; margin: 5px 0; padding: 5px; 
            background: rgba(0,0,0,0.3); border-radius: 4px; font-size: 0.8rem; 
        }
        .stat-val { color: #f1c40f; font-weight: bold; }
        
        .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 5px; font-size: 0.85rem; color: #bbb; }
        .time-hint { color: #74b9ff; font-weight: bold; margin-top: 8px; font-size: 0.9rem; }
        .et-info { font-size: 0.75rem; color: #666; }
    </style>
</head>
<body>

<div class="header">
    <div style="font-weight: bold;">FF14 æ¡é›†åŠ©æ‰‹</div>
    <div style="text-align: right;">
        <span id="lt-display">LT --:--:--</span>
        <span id="et-display">ET --:--</span>
    </div>
</div>

<div class="container">
    <div class="group-title">ğŸ”” ç•¶å‰ç›®æ¨™ (è‡ªå‹•ç½®é ‚)</div>
    <div id="radar-list">
        <div class="card min" data-et="0" data-ver="7.0" data-name="é»‘æ˜ŸçŸ³" data-map="å¥§é«˜æ½˜æŸ¥" data-lv="100" data-g="4200" data-p="4000" data-slot="2"></div>
        
        <div class="card bot" data-et="2" data-ver="7.0" data-name="é˜¿å¡å¤åŸæœ¨" data-map="èµ«åˆ©ç¾…åŠ " data-lv="100" data-g="4200" data-p="4000" data-slot="6"></div>

        <div class="card min" data-et="10" data-ver="6.0" data-name="ç›§æ©é‡‘ç¤¦" data-map="å˜†æ¯æµ·" data-lv="90" data-g="3600" data-p="3600" data-slot="3"></div>

        <div class="card fsh" data-et="9" data-dur="6" data-ver="2.0" data-name="å·¨å¤§ç« é­š" data-map="æ±æ‹‰è«¾è¥¿äº" data-lv="50" data-bait="ç£·è¦æµ·èŸ²" data-fashion="å—æ´‹é¢¨è‰å¸½ / æ³³è¡£"></div>
        
        <div class="card fsh" data-et="10" data-dur="4" data-ver="2.0" data-name="å·¨å‹è®Šè‰²é¾" data-map="åº«çˆ¾æœ­æ–¯ä¸­å¤®" data-lv="50" data-bait="é›²æµ·é’è›™" data-fashion="è€ç†±è£å‚™å‚™ç”¨åˆ¸"></div>

        <div class="card bot" data-et="16" data-ver="4.0" data-name="è•éº¥" data-map="å»¶å¤" data-lv="70" data-g="1200" data-p="1200" data-slot="1"></div>
    </div>
</div>

<script>
    const EORZEA_RATIO = 144 / 7;

    function update() {
        const now = new Date();
        document.getElementById('lt-display').textContent = "LT " + now.toLocaleTimeString('zh-TW', {hour12: false});

        const etSeconds = Math.floor(now.getTime() * EORZEA_RATIO / 1000);
        const etMinute = Math.floor((etSeconds / 60) % 60);
        const etHour = Math.floor((etSeconds / 3600) % 24);
        document.getElementById('et-display').textContent = `ET ${String(etHour).padStart(2, '0')}:${String(etMinute).padStart(2, '0')}`;

        const cards = Array.from(document.querySelectorAll('.card'));
        const radarList = document.getElementById('radar-list');
        let sorted = [];

        cards.forEach(card => {
            const start = parseInt(card.dataset.et);
            const dur = card.dataset.dur ? parseInt(card.dataset.dur) : 2;
            const end = (start + dur) % 24;

            let diffEt = start - etHour;
            if (diffEt < 0) diffEt += 24;
            const remainLt = Math.floor(((diffEt * 60) - etMinute) / EORZEA_RATIO);
            const nextLt = new Date(now.getTime() + remainLt * 60000);

            let isActive = (start < end) ? (etHour >= start && etHour < end) : (etHour >= start || etHour < end);
            card.classList.toggle('active', isActive);

            const isFsh = card.classList.contains('fsh');
            const typeLabel = isFsh ? 'ğŸ£' : (card.classList.contains('min') ? 'â›ï¸' : 'ğŸŒ¿');
            
            card.innerHTML = `
                <span class="v-badge">Ver ${card.dataset.ver}</span>
                ${card.dataset.fashion ? `<span class="fashion-tag">âœ¨ åˆ†è§£ç²å¾—ï¼š${card.dataset.fashion}</span>` : ''}
                <span class="item-name">${typeLabel} ${card.dataset.name} <small style="font-size:0.7rem; color:#888;">(Lv ${card.dataset.lv})</small></span>
                
                <div class="stats-row">
                    ${isFsh ? `<span>ğŸª± é¤Œæ–™: <span class="stat-val">${card.dataset.bait}</span></span>` 
                            : `<span>ç²å¾—åŠ›: <span class="stat-val">${card.dataset.g || '---'}</span></span>
                               <span>è§€å¯ŸåŠ›: <span class="stat-val">${card.dataset.p || '---'}</span></span>`}
                </div>

                <div class="info-grid">
                    <span>ğŸ“ ${card.dataset.map}</span>
                    ${card.dataset.slot ? `<span>æ ¼æ•¸: ç¬¬ ${card.dataset.slot} æ ¼</span>` : ''}
                </div>
                
                <div class="time-hint">${isActive ? 'ğŸ”¥ ç¾åœ¨é–‹æ”¾ä¸­ï¼' : 'ğŸ•’ é è¨ˆ LT ' + nextLt.getHours().toString().padStart(2,'0') + ':' + nextLt.getMinutes().toString().padStart(2,'0') + ' é–‹æ”¾'}</div>
                <div class="et-info">ET è¦–çª—: ${start.toString().padStart(2,'0')}:00 - ${end.toString().padStart(2,'0')}:00</div>
            `;
            sorted.push({ el: card, active: isActive, remain: remainLt });
        });

        sorted.sort((a, b) => a.active === b.active ? a.remain - b.remain : (a.active ? -1 : 1));
        sorted.forEach(item => radarList.appendChild(item.el));
    }

    setInterval(update, 1000);
    update();
</script>
</body>
</html>