<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FF14 æ¡é›†çµ‚æ¥µåŠ©æ‰‹ (å«ç‰ˆæœ¬ç¯©é¸)</title>
    <style>
        :root {
            --bot: #78a55a; --min: #d4a017; --fish: #3498db; --bg: #121212; 
            --card: #1e1e1e; --active: #ff4757; --text: #e0e0e0; --fashion: #e84393;
        }
        body { font-family: -apple-system, "Microsoft JhengHei", sans-serif; background: var(--bg); color: var(--text); margin: 0; padding-bottom: 50px; }
        
        /* å›ºå®šæ¨™é ­èˆ‡ç¯©é¸å™¨ */
        .header-container { position: sticky; top: 0; background: #000; z-index: 1000; border-bottom: 2px solid var(--active); }
        .header { padding: 12px; display: flex; justify-content: space-between; align-items: center; }
        #lt-display { font-weight: bold; color: #74b9ff; font-size: 1.1rem; }
        #et-display { color: #f1c40f; font-size: 0.9rem; }
        
        .filter-bar { 
            display: flex; overflow-x: auto; padding: 10px; gap: 8px; 
            background: #1a1a1a; border-top: 1px solid #333;
            scrollbar-width: none; /* Firefox */
        }
        .filter-bar::-webkit-scrollbar { display: none; /* Chrome/Safari */ }
        
        .filter-btn { 
            white-space: nowrap; padding: 6px 15px; border-radius: 20px; 
            background: #333; color: #ccc; border: none; font-size: 0.85rem; cursor: pointer;
        }
        .filter-btn.active { background: var(--active); color: white; font-weight: bold; }

        .container { padding: 10px; max-width: 650px; margin: auto; }
        .group-title { font-size: 0.85rem; color: #888; margin: 15px 0 8px; display: flex; align-items: center; }
        .group-title::after { content: ""; flex: 1; height: 1px; background: #333; margin-left: 10px; }

        /* å¡ç‰‡æ¨£å¼ */
        .card { background: var(--card); border-radius: 10px; padding: 12px; margin-bottom: 12px; border-left: 6px solid #444; position: relative; display: block; }
        .card.hidden { display: none; }
        .card.active { border-left-color: var(--active) !important; background: #2d1b1b; }
        .card.bot { border-left-color: var(--bot); }
        .card.min { border-left-color: var(--min); }
        .card.fsh { border-left-color: var(--fish); }

        .v-badge { position: absolute; right: 10px; top: 10px; font-size: 10px; background: #444; padding: 2px 6px; border-radius: 4px; }
        .item-name { font-size: 1.1rem; font-weight: bold; color: #fff; margin-bottom: 5px; display: block; padding-right: 50px; }
        .stats-row { display: flex; flex-wrap: wrap; gap: 8px; margin: 5px 0; padding: 6px; background: rgba(0,0,0,0.4); border-radius: 4px; font-size: 0.85rem; }
        .stat-val { color: #f1c40f; font-weight: bold; }
        .reward-tag { color: var(--fashion); font-weight: bold; font-size: 0.9rem; margin-bottom: 5px; display: block; }
        .use-tag { font-size: 0.75rem; color: #aaa; font-style: italic; margin-top: 4px; display: block; }
        .time-hint { color: #74b9ff; font-weight: bold; margin-top: 10px; }
    </style>
</head>
<body>

<div class="header-container">
    <div class="header">
        <div style="font-weight: bold;">FF14 æ¡é›†å¤§å¸«åŠ©æ‰‹</div>
        <div style="text-align: right;">
            <span id="lt-display">LT --:--:--</span>
            <span id="et-display">ET --:--</span>
        </div>
    </div>
    <div class="filter-bar" id="filter-bar">
        <button class="filter-btn active" onclick="filterVersion('all', this)">å…¨éƒ¨é¡¯ç¤º</button>
        <button class="filter-btn" onclick="filterVersion('7.0', this)">7.0</button>
        <button class="filter-btn" onclick="filterVersion('6.0', this)">6.0</button>
        <button class="filter-btn" onclick="filterVersion('5.0', this)">5.0</button>
        <button class="filter-btn" onclick="filterVersion('4.0', this)">4.0</button>
        <button class="filter-btn" onclick="filterVersion('3.0', this)">3.0</button>
        <button class="filter-btn" onclick="filterVersion('2.0', this)">2.0</button>
    </div>
</div>

<div class="container">
    <div id="radar-list">
        <div class="card min" data-et="0" data-ver="7.0" data-name="é»‘æ˜ŸçŸ³ (æ”¶è—å“)" data-map="å¥§é«˜æ½˜æŸ¥" data-lv="100" data-g="4200" data-p="4000" data-slot="2" data-use="æ©™ç¥¨"></div>
        <div class="card bot" data-et="2" data-ver="7.0" data-name="é˜¿å¡å¤åŸæœ¨ (æ”¶è—å“)" data-map="èµ«åˆ©ç¾…åŠ " data-lv="100" data-g="4200" data-p="4000" data-slot="6" data-use="æ©™ç¥¨"></div>
        <div class="card min" data-et="2" data-ver="7.0" data-name="æ°§åŒ–é‹çµæ™¶ (å‚³èªª)" data-map="éºç”¢ä¹‹åœ°" data-lv="100" data-g="4500" data-p="4200" data-slot="3" data-use="7.0è£½ä½œ"></div>
        <div class="card min" data-et="6" data-ver="7.0" data-name="é›·å…¬çŸ³ (å‚³èªª)" data-map="éºç”¢ä¹‹åœ°" data-lv="100" data-g="4500" data-p="4200" data-slot="4" data-use="7.0è£½ä½œ"></div>
        <div class="card bot" data-et="8" data-ver="7.0" data-name="é®®é¾è¡€æ¨¹æ¨¹è„‚ (å‚³èªª)" data-map="èµ«åˆ©ç¾…åŠ " data-lv="100" data-g="4500" data-p="4200" data-slot="4" data-use="7.0è£½ä½œ"></div>

        <div class="card min" data-et="10" data-ver="6.0" data-name="ç›§æ©é‡‘ç¤¦ (å‚³èªª)" data-map="å˜†æ¯æµ·" data-lv="90" data-g="3600" data-p="3600" data-slot="3"></div>
        <div class="card bot" data-et="6" data-ver="6.0" data-name="æœˆè¦‹è‰ (å‚³èªª)" data-map="å˜†æ¯æµ·" data-lv="90" data-g="3600" data-p="3600" data-slot="2"></div>

        <div class="card min" data-et="0" data-ver="5.0" data-name="é—‡éŠ€ç¤¦ (å‚³èªª)" data-map="é»‘é¢¨æµ·" data-lv="80" data-g="2000" data-p="2000" data-slot="1"></div>
        <div class="card bot" data-et="2" data-ver="5.0" data-name="æª€é¦™æœ¨åŸæœ¨ (å‚³èªª)" data-map="æ‹‰å‡±æå¡" data-lv="80" data-g="2000" data-p="2000" data-slot="6"></div>

        <div class="card min" data-et="4" data-ver="4.0" data-name="é‡‘ç¤¦" data-map="å»¶å¤" data-lv="70" data-g="1200" data-p="1200" data-slot="6"></div>

        <div class="card min" data-et="12" data-ver="3.0" data-name="çš‡é‡‘ç¤¦" data-map="é˜¿å·´æ‹‰æäºé›²æµ·" data-lv="60" data-g="800" data-p="800" data-slot="6"></div>

        <div class="card fsh" data-et="9" data-dur="6" data-ver="2.0" data-name="å·¨å¤§ç« é­š" data-map="æ±æ‹‰è«¾è¥¿äº" data-lv="50" data-bait="ç£·è¦æµ·èŸ²" data-fashion="å—æ´‹é¢¨è‰å¸½ / æ³³è£"></div>
        <div class="card fsh" data-et="6" data-dur="5" data-ver="2.0" data-name="å¥§åœŸä¿®æ–¯" data-map="è¥¿æ‹‰è«¾è¥¿äº" data-lv="50" data-bait="æµ®æ¸¸èŸ² > æ¢­å­é­š(å°é‡£å¤§)" data-fashion="æµ·é‚Šç”·å¼æ³³è¤²"></div>
        <div class="card fsh" data-et="17" data-dur="3" data-ver="2.0" data-name="å‡±é¾" data-map="æ±æ‹‰è«¾è¥¿äº" data-lv="50" data-bait="é‡å‹é‹¼éµèª˜é¤Œ" data-fashion="å—æ´‹é¢¨å¥³å¼èƒŒå¿ƒ"></div>
    </div>
</div>

<script>
    const EORZEA_RATIO = 144 / 7;
    let currentFilter = 'all';

    function filterVersion(ver, btn) {
        currentFilter = ver;
        // æ›´æ–°æŒ‰éˆ•æ¨£å¼
        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        update(); // è§¸ç™¼å³æ™‚æ›´æ–°
    }

    function update() {
        const now = new Date();
        document.getElementById('lt-display').textContent = "LT " + now.toLocaleTimeString('zh-TW', {hour12: false});
        const etSeconds = Math.floor(now.getTime() * EORZEA_RATIO / 1000);
        const etMinute = Math.floor((etSeconds / 60) % 60);
        const etHour = Math.floor((etSeconds / 3600) % 24);
        document.getElementById('et-display').textContent = `ET ${String(etHour).padStart(2, '0')}:${String(etMinute).padStart(2, '0')}`;

        const cards = Array.from(document.querySelectorAll('.card'));
        const radarList = document.getElementById('radar-list');
        let sorted = [];

        cards.forEach((card) => {
            // ç¯©é¸é‚è¼¯
            const cardVer = card.dataset.ver;
            if (currentFilter !== 'all' && currentFilter !== cardVer) {
                card.style.display = 'none';
                return;
            } else {
                card.style.display = 'block';
            }

            const start = parseInt(card.dataset.et);
            const dur = card.dataset.dur ? parseInt(card.dataset.dur) : 2;
            const end = (start + dur) % 24;
            let diffEt = start - etHour;
            if (diffEt < 0) diffEt += 24;
            const remainLt = Math.floor(((diffEt * 60) - etMinute) / EORZEA_RATIO);
            const nextLt = new Date(now.getTime() + remainLt * 60000);
            let isActive = (start < end) ? (etHour >= start && etHour < end) : (etHour >= start || etHour < end);
            
            card.classList.toggle('active', isActive);
            const typeLabel = card.classList.contains('fsh') ? 'ğŸ£' : (card.classList.contains('min') ? 'â›ï¸' : 'ğŸŒ¿');
            
            card.innerHTML = `
                <span class="v-badge">Ver ${card.dataset.ver}</span>
                ${card.dataset.fashion ? `<span class="reward-tag">âœ¨ åˆ†è§£ï¼š${card.dataset.fashion}</span>` : ''}
                <span class="item-name">${typeLabel} ${card.dataset.name} <small>(Lv ${card.dataset.lv})</small></span>
                <div class="stats-row">
                    ${card.dataset.bait ? `<span>é¤Œæ–™: <span class="stat-val">${card.dataset.bait}</span></span>` 
                    : `<span>ç²å¾—åŠ›: <span class="stat-val">${card.dataset.g}</span></span> <span>è§€å¯ŸåŠ›: <span class="stat-val">${card.dataset.p}</span></span>`}
                    <span>ğŸ“ ${card.dataset.map}</span>
                </div>
                ${card.dataset.use ? `<span class="use-tag">ç”¨é€”ï¼š${card.dataset.use}</span>` : ''}
                <div class="time-hint">${isActive ? 'ğŸ”¥ æ­£åœ¨é–‹æ”¾ä¸­ï¼' : 'ğŸ•’ é è¨ˆ LT ' + nextLt.getHours().toString().padStart(2,'0') + ':' + nextLt.getMinutes().toString().padStart(2,'0')}</div>
            `;
            sorted.push({ el: card, active: isActive, remain: remainLt });
        });

        // åƒ…å°é¡¯ç¤ºä¸­çš„å¡ç‰‡é€²è¡Œæ’åº
        const visibleSorted = sorted.filter(s => s.el.style.display === 'block');
        visibleSorted.sort((a, b) => a.active === b.active ? a.remain - b.remain : (a.active ? -1 : 1));
        visibleSorted.forEach(item => radarList.appendChild(item.el));
    }

    setInterval(update, 2000);
    update();
</script>
</body>
</html>